<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/socket.io/client-dist/socket.io.min.js"></script>
    <script src="artyom.js"></script>
    <title>Talk To StudyGPT</title>
</head>
<body>
    <button id="chat">Start Voice Chat</button>
    <script>
        const socket = io();

        var recognition =  new webkitSpeechRecognition();
  
  recognition.lang = "en-US";
  recognition.continuous = true;
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;
  document.getElementById("chat").onclick = () => {
  recognition.start();
  recognition.addEventListener("audioend", () => {
    recognition.stop();
});
recognition.onresult = (event) => {
  var chat = event.results[event.results.length -1][0].transcript;
  console.log(chat);
  socket.emit("audio", chat);
};
};
socket.on("talk", speech=> {
    speechSynthesis.speak(new SpeechSynthesisUtterance(speech));
})
    </script>
    
</body>
</html>